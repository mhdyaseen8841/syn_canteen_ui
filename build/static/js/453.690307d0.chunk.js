"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[453],{9848:function(e,t,n){n.d(t,{Z:function(){return g}});var a=n(7313),r=n(7592),o=n(7551),i=n(9601),c=n(1405),s=n(5954),l=n(8210),d=n(8790),u=n(4481),p=n(9916),m=n(712),x=n(7474),y=n(7131),h=n(6417);const f=(0,r.ZP)((e=>(0,h.jsx)(i.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:130,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function g(e){let{data:t,actions:n=["Edit","Delete"],onActionChange:r}=e;const[o,i]=a.useState(null),g=Boolean(o),j=e=>{i(null),r&&r({action:e,data:t})};return(0,h.jsxs)("div",{children:[(0,h.jsx)(y.Z,{variant:"contained",onClick:e=>{i(e.currentTarget)},children:(0,h.jsx)(l.Z,{})}),(0,h.jsx)(f,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:o,open:g,onClose:j,children:n.map(((e,t)=>"ADD TO QUEUE"==e.toUpperCase()?(0,h.jsxs)(c.Z,{onClick:()=>j(e),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,h.jsx)(d.Z,{style:{color:"green"}}),"Add To Queue"]},t):"ADDBOOKING"==e.toUpperCase()?(0,h.jsxs)(c.Z,{onClick:()=>j(e),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,h.jsx)(d.Z,{style:{color:"green"}}),"Add TO BOOKING"]},t):"EDIT"==e.toUpperCase()?(0,h.jsxs)(c.Z,{onClick:()=>j(e),children:[(0,h.jsx)(s.Z,{}),"Edit"]},t):"DELETE"==e.toUpperCase()?(0,h.jsxs)(c.Z,{onClick:()=>j(e),sx:{color:"red","&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},children:[(0,h.jsx)(u.Z,{style:{color:"red"}}),"Delete"]},t):"VIEW"==e.toUpperCase()?(0,h.jsxs)(c.Z,{onClick:()=>j(e),children:[(0,h.jsx)(p.Z,{}),"View"]},t):"CANCEL"==e.toUpperCase()?(0,h.jsxs)(c.Z,{sx:{color:"red"},onClick:()=>j(e),children:[(0,h.jsx)(m.Z,{color:"primary",style:{color:"red"}}),"Cancel"]},t):(0,h.jsxs)(c.Z,{onClick:()=>j(e),children:[(0,h.jsx)(x.Z,{}),e]},t)))})]})}},1322:function(e,t,n){n.d(t,{BO:function(){return C},BZ:function(){return d},EP:function(){return u},Jf:function(){return p},T:function(){return h},TC:function(){return A},U1:function(){return _},Ug:function(){return Z},YD:function(){return w},Ym:function(){return y},_2:function(){return i},ai:function(){return v},iI:function(){return l},k:function(){return E},lQ:function(){return s},ly:function(){return j},nX:function(){return f},qL:function(){return b},r7:function(){return o},tI:function(){return c},to:function(){return x},uI:function(){return g},x4:function(){return r},xk:function(){return m}});const a=n(5662).Z.create({baseURL:"http://192.168.1.8:4001/api/",headers:{"Content-Type":"application/json"}});async function r(e){const t=await a.post("users/login",e);return t.data.access_token&&localStorage.setItem("token",t.data.access_token),t.data}async function o(){return(await a.get("menu")).data}async function i(e){return(await a.put("menu",e)).data}async function c(){return(await a.get("company")).data}async function s(e){return(await a.post("company",e)).data}async function l(){return(await a.get("department")).data}async function d(e){return(await a.post("department",e)).data}async function u(e){return(await a.put("department",e)).data}async function p(e,t){return(await a.get(`employee?company_id=${e}&employee_type=${t}`)).data}async function m(e){return(await a.post("employee",e)).data}async function x(e){return(await a.put("employee",e)).data}async function y(e){return(await a.post("/employee/search",e)).data}async function h(e){return(await a.post("/get-current-transaction",e)).data}async function f(e){return(await a.post("employee-transaction",e)).data}async function g(e){return(await a.post("delete-employee-transaction",e)).data}async function j(e){return(await a.post("fixed-transaction",e)).data}async function C(e){return(await a.post("contractor-transaction",e)).data}async function Z(e){return(await a.post("guest-transaction",e)).data}async function v(e){return(await a.post("expense",e)).data}async function b(e){return(await a.put("expense",e)).data}async function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=await a.get("expense?canteen_calendar_id="+e+"&menu_id="+t);return n.data}async function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=await a.get(`canteen-calender?is_settled=${e}`);return t.data}async function A(e){return(await a.post("do-settlement",e)).data}async function E(e){return(await a.get(`settlement-rates?canteenCalenderId=${e}`)).data}a.interceptors.request.use((async e=>{const t=localStorage.getItem("accessToken");return t?e.headers.Authorization="Bearer "+t:console.warn("Token not found in localStorage"),e}),(e=>Promise.reject(e))),a.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),Navigate("/login"),window.location.href="/login"),Promise.reject(e))))},5266:function(e,t,n){n.d(t,{h:function(){return o}});var a=n(6031),r=n.n(a);const o=(e,t,n)=>e.map((e=>r().mapKeys(e,((e,a)=>{for(let r=0;r<n.length;r++)if(a===t[r])return n[r];return a}))))},6453:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(7313),r=n(1113),o=n(1806),i=n(1405),c=n(1629),s=n(6835),l=n(3477),d=n(4076),u=n(7478),p=n(3467),m=n(6212),x=n(2832),y=n(7970),h=n(3497),f=n(9848),g=n(6417);function j(e){let{data:t,header:n,isShowSerialNo:r=!1,isShowAction:o=!1,actions:i=["Edit","Delete"],onActionChange:j,onClickAction:C,rowsPerPage:Z=10}=e;const[v,b]=(0,a.useState)(1),w=Math.ceil(t.length/Z),_=t.slice((v-1)*Z,v*Z);return(0,g.jsxs)(h.Z,{children:[(0,g.jsx)(c.Z,{children:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(l.Z,{children:(0,g.jsxs)(d.Z,{children:[r&&(0,g.jsx)(u.Z,{sx:{color:"primary.main"},children:"SLNO"}),n.map(((e,t)=>(0,g.jsx)(u.Z,{sx:{color:"primary.main"},children:e},t))),o&&(0,g.jsx)(u.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,g.jsx)(p.Z,{children:_.map(((e,t)=>(0,g.jsxs)(d.Z,{onClick:()=>(e=>{C&&C(e)})(e._id),children:[r&&(0,g.jsx)(u.Z,{children:(v-1)*Z+t+1}),n.map(((t,n)=>{const a=t.replace(/\s+/g,"_"),r=e[t];if("IMAGE"===t.toUpperCase())return(0,g.jsx)(u.Z,{children:(0,g.jsx)("img",{style:{height:"100px"},src:r,alt:"img"})},n);if("isHighRangeArea"!==e.status&&"ISHIGHRANGEAREA"===t.toUpperCase())return(0,g.jsx)(u.Z,{children:r?"Yes":"No"},n);if("PREMIUM_ENABLED"===t.toUpperCase().replace(/\s+/g,"_")){const a="Yes"==e[`${t}`];return(0,g.jsx)(u.Z,{children:(0,g.jsx)(m.Z,{label:a?"Yes":"No",size:"small",variant:"filled",sx:{color:"#fff",backgroundColor:a?"success.main":"#424242"}})},n)}if("PREMIUM_ENABLED"===a){const e="Yes"===r||1===r||!0===r;return(0,g.jsx)(u.Z,{children:(0,g.jsx)(m.Z,{label:e?"Yes":"No",size:"small",variant:"filled",sx:{color:"#fff",backgroundColor:e?"success.main":"#424242"}})},n)}return"STATUS"===t.toUpperCase()?(0,g.jsx)(u.Z,{children:r?"Active":"Inactive"},n):(0,g.jsx)(u.Z,{children:r},n)})),o&&(0,g.jsx)(u.Z,{children:(0,g.jsx)(f.Z,{data:e,onActionChange:e=>j(e),actions:i})})]},t)))})]})}),w>1&&(0,g.jsx)(x.Z,{direction:"row",justifyContent:"flex-end",sx:{p:2},children:(0,g.jsx)(y.Z,{count:w,page:v,onChange:(e,t)=>{b(t)},color:"primary",shape:"rounded"})})]})}var C=n(5266),Z=n(9019),v=n(4631),b=n(1550),w=n(3306),_=n(8797),A=n(1322);const E=["Employee Code","Employee Name","Employee Type","Company","Department","Premium Enabled","Active"];function S(e){let{data:t,deleteAd:n,updateData:r,selectedCompany:c,type:s}=e;const[l,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(),[m,x]=(0,a.useState)(""),[y,h]=(0,a.useState)(""),f=t.filter((e=>{const t=""===m.trim()||e.employee_name.toLowerCase().includes(m.toLowerCase())||e.employee_code.toLowerCase().includes(m.toLowerCase()),n=""===y||e.Active.toString()===y;return t&&n})),S=(0,C.h)(f,["employee_code","employee_name","employee_type","company_id","department_name","premium_enabled","Active"],E).map((e=>({...e,"Premium Enabled":1===e["Premium Enabled"]?"Yes":"No","Employee Type":s,Active:1===e.Active?"Yes":"No"})));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{sx:{mb:2},children:(0,g.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,g.jsx)(v.Z,{label:"Search by Employee Name/Code",variant:"outlined",size:"small",fullWidth:!0,value:m,onChange:e=>x(e.target.value)})}),(0,g.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,g.jsxs)(b.Z,{fullWidth:!0,size:"small",children:[(0,g.jsx)(w.Z,{children:"Active"}),(0,g.jsxs)(_.Z,{value:y,label:"Active",onChange:e=>h(e.target.value),children:[(0,g.jsx)(i.Z,{value:"",children:"All"}),["1","0"].map((e=>(0,g.jsx)(i.Z,{value:e,children:"1"===e?"Active":"Inactive"},e)))]})]})})]})}),l&&(0,g.jsx)(AddForm,{open:l,onClose:()=>{d(!1),p(null),r()},addData:A.to,getData:r,data:u,selectedCompany:c,isEdit:Boolean(u),type:s}),(0,g.jsx)(j,{data:S,header:E,isShowSerialNo:!0,isShowAction:!0,actions:["edit","delete"],onActionChange:e=>{if(console.log(e),"delete"===e.action)p(e.data);else if("edit"===e.action){const t={employee_id:e.data.employee_id,employee_code:e.data["Employee Code"],employee_name:e.data["Employee Name"],company_id:e.data.company_id,department_id:e.data.department_id,premium_enabled:"Yes"===e.data["Premium Enabled"]?1:0,active:"Yes"===e.data.Active?1:0};p(t),d(!0)}},rowsPerPage:5})]})}var k=n(2040),I=n(1095);function P(e){let{buttonClick:t,type:n,selectedCompany:a}=e;return(0,g.jsx)(h.Z,{children:(0,g.jsxs)(x.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)(r.Z,{variant:"h3",color:"secondary.main",children:"Company Wise Reports"}),(0,g.jsx)(I.Z,{disabled:()=>{if(""==a||void 0==a||null==a)return!0},variant:"contained",startIcon:(0,g.jsx)(k.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:t,children:"Add Employees"})]})})}var U=n(1387);function D(){const[e,t]=(0,a.useState)(!1),[n,c]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[p,m]=(0,a.useState)("employee"),x=async()=>{try{if(!d)return void c([]);const e=await(0,A.Jf)(d,p);c(e)}catch(e){console.error(e),U.Am.error("Error fetching employees")}};return(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,A.tI)();l(e)}catch(e){console.error(e),U.Am.error("Error fetching companies")}})()}),[]),(0,a.useEffect)((()=>{x()}),[d,p]),(0,g.jsxs)(Stack,{direction:"column",gap:2,children:[(0,g.jsx)(r.Z,{variant:"h3",color:"secondary.main",children:"Select Company"}),(0,g.jsx)(o.Z,{sx:{mb:2},children:(0,g.jsxs)(Stack,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,g.jsxs)(FormControl,{fullWidth:!0,children:[(0,g.jsx)(InputLabel,{children:"Select Company"}),(0,g.jsxs)(Select,{value:d,label:"Select Company",onChange:e=>u(e.target.value),children:[(0,g.jsx)(i.Z,{value:"",children:(0,g.jsx)("em",{children:"Select a company"})}),s.map((e=>(0,g.jsx)(i.Z,{value:e.company_id,children:e.company_name},e.company_id)))]})]}),(0,g.jsxs)(FormControl,{fullWidth:!0,children:[(0,g.jsx)(InputLabel,{children:"Employee Type"}),(0,g.jsx)(Select,{value:p,label:"Employee Type",onChange:e=>m(e.target.value),children:["employee","contractor","guest"].map((e=>(0,g.jsx)(i.Z,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]})]})}),(0,g.jsx)(AddForm,{open:e,onClose:()=>t(!1),getData:x,addData:A.xk,selectedCompany:d,type:p}),(0,g.jsx)(P,{selectedCompany:!0,buttonClick:()=>{d?t(!0):U.Am.error("Please select a company first")},type:p}),(0,g.jsx)(S,{selectedCompany:d,data:n,updateData:x,type:p})]})}}}]);