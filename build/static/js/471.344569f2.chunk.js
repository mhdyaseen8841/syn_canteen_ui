"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[471],{2186:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(3365),r=t(6149),o=t(3604),i=t(2832),c=t(1113),s=t(7313),l=t(1766),u=t(6417);const d=s.forwardRef((function(e,n){return(0,u.jsx)(a.Z,{ref:n,...e})}));function p(e){let{title:n,children:t,open:a,onClose:s,...p}=e;return(0,u.jsxs)(r.Z,{...p,open:a,TransitionComponent:d,children:[(0,u.jsx)(o.Z,{children:(0,u.jsxs)(i.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,u.jsx)(c.Z,{variant:"h2",color:"primary.main",children:n}),(0,u.jsx)(l.Z,{sx:{cursor:"pointer"},onClick:s})]})}),t]})}},9848:function(e,n,t){t.d(n,{Z:function(){return g}});var a=t(7313),r=t(7592),o=t(7551),i=t(9601),c=t(1405),s=t(5954),l=t(8210),u=t(8790),d=t(4481),p=t(9916),m=t(712),x=t(7474),h=t(7131),f=t(6417);const y=(0,r.ZP)((e=>(0,f.jsx)(i.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...e})))((e=>{let{theme:n}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:n.spacing(1),minWidth:130,color:"light"===n.palette.mode?"rgb(55, 65, 81)":n.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:n.palette.text.secondary,marginRight:n.spacing(1.5)},"&:active":{backgroundColor:(0,o.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}}}}));function g(e){let{data:n,actions:t=["Edit","Delete"],onActionChange:r}=e;const[o,i]=a.useState(null),g=Boolean(o),j=e=>{i(null),r&&r({action:e,data:n})};return(0,f.jsxs)("div",{children:[(0,f.jsx)(h.Z,{variant:"contained",onClick:e=>{i(e.currentTarget)},children:(0,f.jsx)(l.Z,{})}),(0,f.jsx)(y,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:o,open:g,onClose:j,children:t.map(((e,n)=>"ADD TO QUEUE"==e.toUpperCase()?(0,f.jsxs)(c.Z,{onClick:()=>j(e),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,f.jsx)(u.Z,{style:{color:"green"}}),"Add To Queue"]},n):"ADDBOOKING"==e.toUpperCase()?(0,f.jsxs)(c.Z,{onClick:()=>j(e),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,f.jsx)(u.Z,{style:{color:"green"}}),"Add TO BOOKING"]},n):"EDIT"==e.toUpperCase()?(0,f.jsxs)(c.Z,{onClick:()=>j(e),children:[(0,f.jsx)(s.Z,{}),"Edit"]},n):"DELETE"==e.toUpperCase()?(0,f.jsxs)(c.Z,{onClick:()=>j(e),sx:{color:"red","&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},children:[(0,f.jsx)(d.Z,{style:{color:"red"}}),"Delete"]},n):"VIEW"==e.toUpperCase()?(0,f.jsxs)(c.Z,{onClick:()=>j(e),children:[(0,f.jsx)(p.Z,{}),"View"]},n):"CANCEL"==e.toUpperCase()?(0,f.jsxs)(c.Z,{sx:{color:"red"},onClick:()=>j(e),children:[(0,f.jsx)(m.Z,{color:"primary",style:{color:"red"}}),"Cancel"]},n):(0,f.jsxs)(c.Z,{onClick:()=>j(e),children:[(0,f.jsx)(x.Z,{}),e]},n)))})]})}},1322:function(e,n,t){t.d(n,{BO:function(){return C},BZ:function(){return u},EP:function(){return d},Jf:function(){return p},T:function(){return f},TC:function(){return k},U1:function(){return _},Ug:function(){return Z},YD:function(){return b},Ym:function(){return h},_2:function(){return i},ai:function(){return w},iI:function(){return l},k:function(){return A},lQ:function(){return s},ly:function(){return j},nX:function(){return y},qL:function(){return v},r7:function(){return o},tI:function(){return c},to:function(){return x},uI:function(){return g},x4:function(){return r},xk:function(){return m}});const a=t(5662).Z.create({baseURL:"http://192.168.1.8:4001/api/",headers:{"Content-Type":"application/json"}});async function r(e){const n=await a.post("users/login",e);return n.data.access_token&&localStorage.setItem("token",n.data.access_token),n.data}async function o(){return(await a.get("menu")).data}async function i(e){return(await a.put("menu",e)).data}async function c(){return(await a.get("company")).data}async function s(e){return(await a.post("company",e)).data}async function l(){return(await a.get("department")).data}async function u(e){return(await a.post("department",e)).data}async function d(e){return(await a.put("department",e)).data}async function p(e,n){return(await a.get(`employee?company_id=${e}&employee_type=${n}`)).data}async function m(e){return(await a.post("employee",e)).data}async function x(e){return(await a.put("employee",e)).data}async function h(e){return(await a.post("/employee/search",e)).data}async function f(e){return(await a.post("/get-current-transaction",e)).data}async function y(e){return(await a.post("employee-transaction",e)).data}async function g(e){return(await a.post("delete-employee-transaction",e)).data}async function j(e){return(await a.post("fixed-transaction",e)).data}async function C(e){return(await a.post("contractor-transaction",e)).data}async function Z(e){return(await a.post("guest-transaction",e)).data}async function w(e){return(await a.post("expense",e)).data}async function v(e){return(await a.put("expense",e)).data}async function b(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=await a.get("expense?canteen_calendar_id="+e+"&menu_id="+n);return t.data}async function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=await a.get(`canteen-calender?is_settled=${e}`);return n.data}async function k(e){return(await a.post("do-settlement",e)).data}async function A(e){return(await a.get(`settlement-rates?canteenCalenderId=${e}`)).data}a.interceptors.request.use((async e=>{const n=localStorage.getItem("accessToken");return n?e.headers.Authorization="Bearer "+n:console.warn("Token not found in localStorage"),e}),(e=>Promise.reject(e))),a.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),Navigate("/login"),window.location.href="/login"),Promise.reject(e))))},5266:function(e,n,t){t.d(n,{h:function(){return o}});var a=t(6031),r=t.n(a);const o=(e,n,t)=>e.map((e=>r().mapKeys(e,((e,a)=>{for(let r=0;r<t.length;r++)if(a===n[r])return t[r];return a}))))},2471:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var a=t(7313),r=t(2832),o=t(3497),i=t(1629),c=t(6835),s=t(3477),l=t(4076),u=t(7478),d=t(3467),p=t(9848),m=t(6417);function x(e){let{data:n,header:t,isShowSerialNo:a=!1,isShowAction:r=!1,actions:x=["Edit","Delete"],onActionChange:h,onClickAction:f}=e;return(0,m.jsx)(o.Z,{children:(0,m.jsx)(i.Z,{children:(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(s.Z,{children:(0,m.jsxs)(l.Z,{children:[a&&(0,m.jsx)(u.Z,{sx:{color:"primary.main"},children:"SLNO"}),t.map(((e,n)=>(0,m.jsx)(u.Z,{sx:{color:"primary.main"},children:e},n))),r&&(0,m.jsx)(u.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,m.jsx)(d.Z,{children:n.map(((e,n)=>(0,m.jsxs)(l.Z,{onClick:()=>(e=>{f&&f(e)})(e["Company Id"]),children:[a&&(0,m.jsx)(u.Z,{children:n+1}),t.map(((n,t)=>"IMAGE"===n.toUpperCase()?(0,m.jsx)(u.Z,{children:(0,m.jsx)("img",{style:{height:"100px"},src:`${e[`${n}`]}`,alt:"img"})},t):"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===n.toUpperCase()?(0,m.jsx)(u.Z,{children:e[`${n}`]?"Yes":"No"},t):"STATUS"===n.toUpperCase()?(0,m.jsx)(u.Z,{children:e[`${n}`]?"Active":"Inactive"},t):(0,m.jsx)(u.Z,{children:e[`${n}`]},t))),r&&(0,m.jsx)(u.Z,{children:(0,m.jsx)(p.Z,{data:e,onActionChange:e=>{h(e)},actions:x})})]},n)))})]})})})}var h=t(5266),f=t(1806),y=t(9019),g=t(4631),j=t(1387),C=t(7825),Z=t(1113),w=t(1095),v=t(5627),b=t(2186);function _(e){let{getData:n,addData:t,open:a,onClose:o,isEdit:i=!1,data:c={}}=e;const{control:s,handleSubmit:l,formState:{errors:u}}=(0,v.cI)({defaultValues:{company_name:(null===c||void 0===c?void 0:c.company_name)||""}});return(0,m.jsx)(b.Z,{open:a,fullWidth:!0,onClose:o,title:(i?"Edit":"Add")+" Company",children:(0,m.jsx)("form",{onSubmit:l((e=>{const a={company_name:e.company_name};t(a).then((e=>{j.Am.success(i?"Company Updated Successfully":"Company Added Successfully"),n(),o()})).catch((e=>{var n,t;console.error(e),j.Am.error((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Error saving company")}))})),children:(0,m.jsx)(C.Z,{children:(0,m.jsxs)(r.Z,{direction:"column",sx:{p:2},spacing:2,children:[(0,m.jsx)(Z.Z,{variant:"h5",children:"Company Name"}),(0,m.jsx)(v.Qr,{name:"company_name",control:s,rules:{required:"Company Name is required",minLength:{value:3,message:"Company name must be at least 3 characters"}},render:e=>{var n;let{field:t}=e;return(0,m.jsx)(g.Z,{...t,fullWidth:!0,error:Boolean(u.company_name),helperText:null===(n=u.company_name)||void 0===n?void 0:n.message,label:"Company Name",variant:"outlined"})}}),(0,m.jsx)(w.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:i?"Update":"Add"})]})})})})}const k=["Company Id","Company Name"];function A(e){let{data:n,deleteAd:t,updateData:r}=e;const[o,i]=(0,a.useState)(!1),[c,s]=(0,a.useState)(),[l,u]=(0,a.useState)(""),d=n.filter((e=>""===l.trim()||e.company_name.toLowerCase().includes(l.toLowerCase()))),p=(0,h.h)(d,["company_id","company_name"],k);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{sx:{mb:2},children:(0,m.jsx)(y.ZP,{container:!0,spacing:2,children:(0,m.jsx)(y.ZP,{item:!0,xs:12,children:(0,m.jsx)(g.Z,{label:"Search by Company Name",variant:"outlined",size:"small",fullWidth:!0,value:l,onChange:e=>u(e.target.value)})})})}),(0,m.jsx)(_,{open:o,onClose:()=>{i(!1),s(null),r()},data:c,isEdit:Boolean(c)}),(0,m.jsx)(x,{data:p,header:k,isShowSerialNo:!1,isShowAction:!1,onClickAction:e=>{},actions:["edit","delete"],onActionChange:e=>{if(console.log(e),"delete"===e.action)s(e.data),t(e.data._id).then((()=>{r()})).catch((e=>{console.error(e),j.Am.error(e.response.data.message)}));else if("edit"===e.action){const n={company_id:e.data.company_id,company_name:e.data.company_name};s(n),i(!0)}}})]})}function S(e){let{buttonClick:n}=e;return(0,m.jsx)(o.Z,{children:(0,m.jsx)(r.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:(0,m.jsx)(Z.Z,{variant:"h3",color:"secondary.main",children:"Manage Company"})})})}var I=t(1322);function E(){const[e,n]=(0,a.useState)(!1),[t,o]=(0,a.useState)([]),i=async()=>{try{const e=await(0,I.tI)();o(e)}catch(e){console.log(e)}};return(0,a.useEffect)((()=>{console.log("heeeeeeeeeeeeeeeey"),i()}),[]),(0,m.jsxs)(r.Z,{direction:"column",gap:2,children:[(0,m.jsx)(_,{open:e,addData:I.lQ,getData:i,onClose:()=>n(!1)}),(0,m.jsx)(S,{buttonClick:()=>n(!0)}),(0,m.jsx)(A,{data:t,updateData:i})]})}}}]);