"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[649],{2186:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(3365),r=n(6149),o=n(3604),i=n(2832),s=n(1113),c=n(7313),d=n(1766),l=n(6417);const u=c.forwardRef((function(e,t){return(0,l.jsx)(a.Z,{ref:t,...e})}));function p(e){let{title:t,children:n,open:a,onClose:c,...p}=e;return(0,l.jsxs)(r.Z,{...p,open:a,TransitionComponent:u,children:[(0,l.jsx)(o.Z,{children:(0,l.jsxs)(i.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)(s.Z,{variant:"h2",color:"primary.main",children:t}),(0,l.jsx)(d.Z,{sx:{cursor:"pointer"},onClick:c})]})}),n]})}},9848:function(e,t,n){n.d(t,{Z:function(){return j}});var a=n(7313),r=n(7592),o=n(7551),i=n(9601),s=n(1405),c=n(5954),d=n(8210),l=n(8790),u=n(4481),p=n(9916),m=n(712),x=n(7474),h=n(7131),f=n(6417);const g=(0,r.ZP)((e=>(0,f.jsx)(i.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:130,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function j(e){let{data:t,actions:n=["Edit","Delete"],onActionChange:r}=e;const[o,i]=a.useState(null),j=Boolean(o),y=e=>{i(null),r&&r({action:e,data:t})};return(0,f.jsxs)("div",{children:[(0,f.jsx)(h.Z,{variant:"contained",onClick:e=>{i(e.currentTarget)},children:(0,f.jsx)(d.Z,{})}),(0,f.jsx)(g,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:o,open:j,onClose:y,children:n.map(((e,t)=>"ADD TO QUEUE"==e.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>y(e),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,f.jsx)(l.Z,{style:{color:"green"}}),"Add To Queue"]},t):"ADDBOOKING"==e.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>y(e),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,f.jsx)(l.Z,{style:{color:"green"}}),"Add TO BOOKING"]},t):"EDIT"==e.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>y(e),children:[(0,f.jsx)(c.Z,{}),"Edit"]},t):"DELETE"==e.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>y(e),sx:{color:"red","&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},children:[(0,f.jsx)(u.Z,{style:{color:"red"}}),"Delete"]},t):"VIEW"==e.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>y(e),children:[(0,f.jsx)(p.Z,{}),"View"]},t):"CANCEL"==e.toUpperCase()?(0,f.jsxs)(s.Z,{sx:{color:"red"},onClick:()=>y(e),children:[(0,f.jsx)(m.Z,{color:"primary",style:{color:"red"}}),"Cancel"]},t):(0,f.jsxs)(s.Z,{onClick:()=>y(e),children:[(0,f.jsx)(x.Z,{}),e]},t)))})]})}},1322:function(e,t,n){n.d(t,{BO:function(){return Z},BZ:function(){return l},EP:function(){return u},Jf:function(){return p},T:function(){return f},TC:function(){return D},U1:function(){return b},Ug:function(){return v},YD:function(){return _},Ym:function(){return h},_2:function(){return i},ai:function(){return C},iI:function(){return d},k:function(){return A},lQ:function(){return c},ly:function(){return y},nX:function(){return g},qL:function(){return w},r7:function(){return o},tI:function(){return s},to:function(){return x},uI:function(){return j},x4:function(){return r},xk:function(){return m}});const a=n(5662).Z.create({baseURL:"http://192.168.1.8:4001/api/",headers:{"Content-Type":"application/json"}});async function r(e){const t=await a.post("users/login",e);return t.data.access_token&&localStorage.setItem("token",t.data.access_token),t.data}async function o(){return(await a.get("menu")).data}async function i(e){return(await a.put("menu",e)).data}async function s(){return(await a.get("company")).data}async function c(e){return(await a.post("company",e)).data}async function d(){return(await a.get("department")).data}async function l(e){return(await a.post("department",e)).data}async function u(e){return(await a.put("department",e)).data}async function p(e,t){return(await a.get(`employee?company_id=${e}&employee_type=${t}`)).data}async function m(e){return(await a.post("employee",e)).data}async function x(e){return(await a.put("employee",e)).data}async function h(e){return(await a.post("/employee/search",e)).data}async function f(e){return(await a.post("/get-current-transaction",e)).data}async function g(e){return(await a.post("employee-transaction",e)).data}async function j(e){return(await a.post("delete-employee-transaction",e)).data}async function y(e){return(await a.post("fixed-transaction",e)).data}async function Z(e){return(await a.post("contractor-transaction",e)).data}async function v(e){return(await a.post("guest-transaction",e)).data}async function C(e){return(await a.post("expense",e)).data}async function w(e){return(await a.put("expense",e)).data}async function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=await a.get("expense?canteen_calendar_id="+e+"&menu_id="+t);return n.data}async function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=await a.get(`canteen-calender?is_settled=${e}`);return t.data}async function D(e){return(await a.post("do-settlement",e)).data}async function A(e){return(await a.get(`settlement-rates?canteenCalenderId=${e}`)).data}a.interceptors.request.use((async e=>{const t=localStorage.getItem("accessToken");return t?e.headers.Authorization="Bearer "+t:console.warn("Token not found in localStorage"),e}),(e=>Promise.reject(e))),a.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),Navigate("/login"),window.location.href="/login"),Promise.reject(e))))},5266:function(e,t,n){n.d(t,{h:function(){return o}});var a=n(6031),r=n.n(a);const o=(e,t,n)=>e.map((e=>r().mapKeys(e,((e,a)=>{for(let r=0;r<n.length;r++)if(a===t[r])return n[r];return a}))))},8024:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var a=n(7313),r=n(2832),o=n(3497),i=n(1629),s=n(6835),c=n(3477),d=n(4076),l=n(7478),u=n(3467),p=n(9848),m=n(6417);function x(e){let{data:t,header:n,isShowSerialNo:a=!1,isShowAction:r=!1,actions:x=["Edit","Delete"],onActionChange:h,onClickAction:f}=e;return(0,m.jsx)(o.Z,{children:(0,m.jsx)(i.Z,{children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(c.Z,{children:(0,m.jsxs)(d.Z,{children:[a&&(0,m.jsx)(l.Z,{sx:{color:"primary.main"},children:"SLNO"}),n.map(((e,t)=>(0,m.jsx)(l.Z,{sx:{color:"primary.main"},children:e},t))),r&&(0,m.jsx)(l.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,m.jsx)(u.Z,{children:t.map(((e,t)=>(0,m.jsxs)(d.Z,{onClick:()=>(e=>{f&&f(e)})(e._id),children:[a&&(0,m.jsx)(l.Z,{children:t+1}),n.map(((t,n)=>"IMAGE"===t.toUpperCase()?(0,m.jsx)(l.Z,{children:(0,m.jsx)("img",{style:{height:"100px"},src:`${e[`${t}`]}`,alt:"img"})},n):"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===t.toUpperCase()?(0,m.jsx)(l.Z,{children:e[`${t}`]?"Yes":"No"},n):"STATUS"===t.toUpperCase()?(0,m.jsx)(l.Z,{children:e[`${t}`]?"Active":"Inactive"},n):(0,m.jsx)(l.Z,{children:e[`${t}`]},n))),r&&(0,m.jsx)(l.Z,{children:(0,m.jsx)(p.Z,{data:e,onActionChange:e=>{h(e)},actions:x})})]},t)))})]})})})}var h=n(5266),f=n(1806),g=n(9019),j=n(4631),y=n(1387),Z=n(7825),v=n(1113),C=n(1095),w=n(5627),_=n(2186);function b(e){let{getData:t,addData:n,open:o,onClose:i,isEdit:s=!1,data:c={},isExist:d}=e;const{control:l,handleSubmit:u,reset:p,formState:{errors:x}}=(0,w.cI)({defaultValues:{department_name:""}});return(0,a.useEffect)((()=>{o&&(console.log("dddddddddddd"),p({department_name:(null===c||void 0===c?void 0:c.department_name)||""}))}),[o]),(0,m.jsx)(_.Z,{open:o,fullWidth:!0,onClose:i,title:(s?"Edit":"Add")+" Department",children:(0,m.jsx)("form",{onSubmit:u((e=>{if(d(e.department_name))return void y.Am.error("Department already exists");const a={department_name:e.department_name};if(s){if(void 0===(null===c||void 0===c?void 0:c.department_id)||""===(null===c||void 0===c?void 0:c.department_id))return void y.Am.error("Please select a department first");a.department_id=null===c||void 0===c?void 0:c.department_id}n(a).then((e=>{y.Am.success(s?"Department Updated Successfully":"Department Added Successfully"),t(),i()})).catch((e=>{var t,n;console.error(e),y.Am.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error saving Department")}))})),children:(0,m.jsx)(Z.Z,{children:(0,m.jsxs)(r.Z,{direction:"column",sx:{p:2},spacing:2,children:[(0,m.jsx)(v.Z,{variant:"h5",children:"Department Name"}),(0,m.jsx)(w.Qr,{name:"department_name",control:l,rules:{required:"Department Name is required",minLength:{value:1,message:"Department name must be at least 1 characters"}},render:e=>{var t;let{field:n}=e;return(0,m.jsx)(j.Z,{...n,fullWidth:!0,error:Boolean(x.department_name),helperText:null===(t=x.department_name)||void 0===t?void 0:t.message,label:"Department Name",variant:"outlined"})}}),(0,m.jsx)(C.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:s?"Update":"Add"})]})})})})}var D=n(1322);const A=["Department Id","Department Name"];function k(e){let{data:t,deleteAd:n,updateData:r,isExist:o}=e;const[i,s]=(0,a.useState)(!1),[c,d]=(0,a.useState)(),[l,u]=(0,a.useState)(""),p=t.filter((e=>""===l.trim()||e.department_name.toLowerCase().includes(l.toLowerCase()))),Z=(0,h.h)(p,["department_id","department_name"],A);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{sx:{mb:2},children:(0,m.jsx)(g.ZP,{container:!0,spacing:2,children:(0,m.jsx)(g.ZP,{item:!0,xs:12,children:(0,m.jsx)(j.Z,{label:"Search by Department Name",variant:"outlined",size:"small",fullWidth:!0,value:l,onChange:e=>u(e.target.value)})})})}),(0,m.jsx)(b,{open:i,onClose:()=>{s(!1),d(null),r()},data:c,addData:D.EP,isEdit:Boolean(c),getData:r,isExist:o}),(0,m.jsx)(x,{data:Z,header:A,isShowSerialNo:!1,isShowAction:!0,actions:["edit"],onActionChange:e=>{if(console.log(e),"delete"===e.action)d(e.data),n(e.data._id).then((()=>{r()})).catch((e=>{console.error(e),y.Am.error(e.response.data.message)}));else if("edit"===e.action){const t={department_id:e.data["Department Id"],department_name:e.data["Department Name"]};d(t),s(!0)}}})]})}var S=n(2040);function E(e){let{buttonClick:t}=e;return(0,m.jsx)(o.Z,{children:(0,m.jsxs)(r.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsx)(v.Z,{variant:"h3",color:"secondary.main",children:"Manage Department"}),(0,m.jsx)(C.Z,{variant:"contained",startIcon:(0,m.jsx)(S.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:t,children:"Add Department"})]})})}function I(){const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)([]),i=async()=>{try{const e=await(0,D.iI)();o(e)}catch(e){console.log(e)}},s=e=>{const t=e.trim().toLowerCase();return n.some((e=>{var n;return(null===(n=e.department_name)||void 0===n?void 0:n.trim().toLowerCase())===t}))};return(0,a.useEffect)((()=>{i()}),[]),(0,m.jsxs)(r.Z,{direction:"column",gap:2,children:[(0,m.jsx)(b,{open:e,addData:D.BZ,getData:i,onClose:()=>t(!1),isExist:s}),(0,m.jsx)(E,{buttonClick:()=>t(!0)}),(0,m.jsx)(k,{data:n,updateData:i,isExist:s})]})}},2040:function(e,t,n){var a=n(1171),r=n(6417);t.Z=(0,a.Z)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")}}]);