"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[845],{2845:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var n=i(7313),r=i(2832),a=i(3497),s=i(1629),l=i(6835),d=i(3477),o=i(4076),c=i(7478),u=i(3467),m=i(9848),h=i(6417);function v(e){let{data:t,header:i,isShowSerialNo:n=!1,isShowAction:r=!1,actions:v=["Edit","Delete"],onActionChange:x,onClickAction:p}=e;return(0,h.jsx)(a.Z,{children:(0,h.jsx)(s.Z,{children:(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(d.Z,{children:(0,h.jsxs)(o.Z,{children:[n&&(0,h.jsx)(c.Z,{sx:{color:"primary.main"},children:"SLNO"}),i.map(((e,t)=>(0,h.jsx)(c.Z,{sx:{color:"primary.main"},children:e},t))),r&&(0,h.jsx)(c.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,h.jsx)(u.Z,{children:t.map(((e,t)=>(0,h.jsxs)(o.Z,{onClick:()=>(e=>{p&&p(e)})(e._id),children:[n&&(0,h.jsx)(c.Z,{children:t+1}),i.map(((t,i)=>"IMAGE"===t.toUpperCase()?(0,h.jsx)(c.Z,{children:(0,h.jsx)("img",{style:{height:"100px"},src:`${e[`${t}`]}`,alt:"img"})},i):"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===t.toUpperCase()?(0,h.jsx)(c.Z,{children:e[`${t}`]?"Yes":"No"},i):"STATUS"===t.toUpperCase()?(0,h.jsx)(c.Z,{children:e[`${t}`]?"Active":"Inactive"},i):(0,h.jsx)(c.Z,{children:e[`${t}`]},i))),r&&(0,h.jsx)(c.Z,{children:(0,h.jsx)(m.Z,{data:e,onActionChange:e=>{x(e)},actions:v})})]},t)))})]})})})}var x=i(5266),p=i(1806),j=i(9019),_=i(4631),Z=i(1550),g=i(3306),S=i(8797),A=i(1405),f=i(1387),C=i(7825),b=i(1113),T=i(3929),y=i(24),E=i(1095),M=i(5627),k=i(2186);const w=e=>{const[t,i]=e.split(" ");let[n,r]=t.split(":");return"PM"===i&&"12"!==n?n=String(parseInt(n,10)+12):"AM"===i&&"12"===n&&(n="00"),`${n.padStart(2,"0")}:${r}`};function I(e){let{getData:t,addData:i,open:a,onClose:s,isEdit:l=!1,data:d={}}=e;const[o,c]=n.useState(1===(null===d||void 0===d?void 0:d.active)),{control:u,handleSubmit:m,reset:v,formState:{errors:x}}=(0,M.cI)({defaultValues:{menu_id:(null===d||void 0===d?void 0:d.menu_id)||"",start_time:(null===d||void 0===d?void 0:d.start_time)||"",end_time:(null===d||void 0===d?void 0:d.end_time)||"",active:(null===d||void 0===d?void 0:d.active)||1}});return(0,n.useEffect)((()=>{console.log("trugger"),l&&(console.log(d),v({start_time:w((null===d||void 0===d?void 0:d.start_time)||"00:00"),end_time:w((null===d||void 0===d?void 0:d.end_time)||"00:00"),active:(null===d||void 0===d?void 0:d.active)||1}),c(1===(null===d||void 0===d?void 0:d.active)))}),[l]),(0,h.jsx)(k.Z,{open:a,fullWidth:!0,onClose:s,title:(l?"Edit":"Add")+" Menu",children:(0,h.jsx)("form",{onSubmit:m((e=>{if(""===e.start_time||""===e.end_time)return void f.Am.error("Start Time and End Time are required");const n={menu_id:l?d.menu_id:void 0,start_time:e.start_time,end_time:e.end_time,active:o?1:0};i(n).then((e=>{f.Am.success(l?"Menu Updated Successfully":"Menu Added Successfully"),t(),s()})).catch((e=>{var t,i;console.error(e),f.Am.error((null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Error saving menu")}))})),children:(0,h.jsx)(C.Z,{children:(0,h.jsxs)(r.Z,{direction:"column",sx:{p:2},spacing:2,children:[(0,h.jsx)(b.Z,{variant:"h5",children:"Start Time"}),(0,h.jsx)(M.Qr,{name:"start_time",control:u,rules:{required:"Start Time is required"},render:e=>{var t;let{field:i}=e;return(0,h.jsx)(_.Z,{...i,type:"time",label:"Start Time",fullWidth:!0,error:Boolean(x.start_time),helperText:null===(t=x.start_time)||void 0===t?void 0:t.message,InputLabelProps:{shrink:!0},inputProps:{step:1800}})}}),(0,h.jsx)(b.Z,{variant:"h5",children:"End Time"}),(0,h.jsx)(M.Qr,{name:"end_time",control:u,rules:{required:"End Time is required"},render:e=>{var t;let{field:i}=e;return(0,h.jsx)(_.Z,{...i,type:"time",label:"End Time",fullWidth:!0,error:Boolean(x.end_time),helperText:null===(t=x.end_time)||void 0===t?void 0:t.message,InputLabelProps:{shrink:!0},inputProps:{step:1800}})}}),(0,h.jsx)(T.Z,{control:(0,h.jsx)(y.Z,{checked:o,onChange:e=>c(e.target.checked)}),label:"Active"}),(0,h.jsx)(E.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:l?"Update":"Add"})]})})})})}const D=e=>{if(!e)return"";const t=e.split("T")[1],i=parseInt(t.substring(0,2)),n=t.substring(3,5),r=i>=12?"PM":"AM",a=i>12?i-12:i;return`${(0===a?12:a).toString().padStart(2,"0")}:${n} ${r}`};var $=i(1322);const P=["Menu Code","Menu Name","Start Time","End Time","Active"];function N(e){let{data:t,updateData:i}=e;const[r,a]=(0,n.useState)(!1),[s,l]=(0,n.useState)(),[d,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),m=t.filter((e=>{const t=""===d.trim()||e.menu_name.toLowerCase().includes(d.toLowerCase()),i=""===c||e.Active.toString()===c;return t&&i})),C=(0,x.h)(m,["menu_code","menu_name","start_time","end_time","Active"],P).map((e=>({...e,"Start Time":D(e["Start Time"]),"End Time":D(e["End Time"]),Active:1===e.Active?"Yes":"No"})));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p.Z,{sx:{mb:2},children:(0,h.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,h.jsx)(j.ZP,{item:!0,xs:12,md:6,children:(0,h.jsx)(_.Z,{label:"Search by Menu Name",variant:"outlined",size:"small",fullWidth:!0,value:d,onChange:e=>o(e.target.value)})}),(0,h.jsx)(j.ZP,{item:!0,xs:12,md:6,children:(0,h.jsxs)(Z.Z,{fullWidth:!0,size:"small",children:[(0,h.jsx)(g.Z,{children:"Active"}),(0,h.jsxs)(S.Z,{value:c,label:"Active",onChange:e=>u(e.target.value),children:[(0,h.jsx)(A.Z,{value:"",children:"All"}),["1","0"].map((e=>(0,h.jsx)(A.Z,{value:e,children:"1"===e?"Active":"Inactive"},e)))]})]})})]})}),(0,h.jsx)(I,{open:r,addData:$._2,getData:i,onClose:()=>{a(!1),l(null),i()},data:s,isEdit:Boolean(s)}),(0,h.jsx)(v,{data:C,header:P,isShowSerialNo:!0,isShowAction:!0,actions:["edit","delete"],onActionChange:e=>{if(console.log(e),"delete"===e.action)l(e.data),deleteAd(e.data._id).then((()=>{i()})).catch((e=>{console.error(e),f.Am.error(e.response.data.message)}));else if("edit"===e.action){const t={menu_id:e.data.menu_id,start_time:e.data["Start Time"],end_time:e.data["End Time"],active:"Yes"===e.data.Active?1:0};l(t),a(!0)}}})]})}function U(e){let{buttonClick:t}=e;return(0,h.jsx)(a.Z,{children:(0,h.jsx)(r.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:(0,h.jsx)(b.Z,{variant:"h3",color:"secondary.main",children:"Manage Menu"})})})}function q(){const[e,t]=(0,n.useState)(!1),[i,a]=(0,n.useState)([]),s=async()=>{try{const e=await(0,$.r7)();a(e)}catch(e){console.log(e)}};(0,n.useEffect)((()=>{console.log("heeeeeeeeeeeeeeeey"),s()}),[]);return(0,h.jsxs)(r.Z,{direction:"column",gap:2,children:[(0,h.jsx)(I,{open:e,addData:async e=>!0,getData:s,onClose:()=>t(!1)}),(0,h.jsx)(U,{buttonClick:()=>t(!0)}),(0,h.jsx)(N,{editData:$._2,data:i,updateData:s})]})}}}]);