"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[565],{1322:function(e,n,t){t.d(n,{BO:function(){return j},BZ:function(){return l},EP:function(){return d},Jf:function(){return m},T:function(){return x},TC:function(){return P},U1:function(){return S},Ug:function(){return v},YD:function(){return b},Ym:function(){return f},_2:function(){return o},ai:function(){return Z},iI:function(){return u},k:function(){return k},lQ:function(){return c},ly:function(){return w},nX:function(){return g},qL:function(){return _},r7:function(){return s},tI:function(){return i},to:function(){return h},uI:function(){return y},x4:function(){return a},xk:function(){return p}});const r=t(5662).Z.create({baseURL:"http://192.168.1.8:4001/api/",headers:{"Content-Type":"application/json"}});async function a(e){const n=await r.post("users/login",e);return n.data.access_token&&localStorage.setItem("token",n.data.access_token),n.data}async function s(){return(await r.get("menu")).data}async function o(e){return(await r.put("menu",e)).data}async function i(){return(await r.get("company")).data}async function c(e){return(await r.post("company",e)).data}async function u(){return(await r.get("department")).data}async function l(e){return(await r.post("department",e)).data}async function d(e){return(await r.put("department",e)).data}async function m(e,n){return(await r.get(`employee?company_id=${e}&employee_type=${n}`)).data}async function p(e){return(await r.post("employee",e)).data}async function h(e){return(await r.put("employee",e)).data}async function f(e){return(await r.post("/employee/search",e)).data}async function x(e){return(await r.post("/get-current-transaction",e)).data}async function g(e){return(await r.post("employee-transaction",e)).data}async function y(e){return(await r.post("delete-employee-transaction",e)).data}async function w(e){return(await r.post("fixed-transaction",e)).data}async function j(e){return(await r.post("contractor-transaction",e)).data}async function v(e){return(await r.post("guest-transaction",e)).data}async function Z(e){return(await r.post("expense",e)).data}async function _(e){return(await r.put("expense",e)).data}async function b(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=await r.get("expense?canteen_calendar_id="+e+"&menu_id="+n);return t.data}async function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=await r.get(`canteen-calender?is_settled=${e}`);return n.data}async function P(e){return(await r.post("do-settlement",e)).data}async function k(e){return(await r.get(`settlement-rates?canteenCalenderId=${e}`)).data}r.interceptors.request.use((async e=>{const n=localStorage.getItem("accessToken");return n?e.headers.Authorization="Bearer "+n:console.warn("Token not found in localStorage"),e}),(e=>Promise.reject(e))),r.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),Navigate("/login"),window.location.href="/login"),Promise.reject(e))))},3565:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(7890),a=t(9466),s=t(7313),o=t(9860),i=t(5300),c=t(9019),u=t(2832),l=t(1113),d=t(9536);var m=(0,t(7592).ZP)("div")((e=>{let{theme:n}=e;return{backgroundColor:n.palette.primary.light,minHeight:"100vh"}})),p=t(1806),h=t(3497),f=t(6417);var x=e=>{let{children:n,...t}=e;return(0,f.jsx)(h.Z,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...t,children:(0,f.jsx)(p.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:n})})},g=t(1387),y=t(1550),w=t(3306),j=t(9914),v=t(5480),Z=t(1727),_=t(7131),b=t(1095),S=t(9429),P=t(551),k=t(1730);const I=(0,s.forwardRef)(((e,n)=>{var t,r;let a,s,{children:o,type:i,direction:c,offset:u,scale:l}=e;switch(c){case"up":case"left":a=u,s=0;break;default:a=0,s=u}const[d,m]=(0,P.n)(a,s),[p,h]=(0,P.n)(a,s);switch(i){case"rotate":return(0,f.jsx)(k.E.div,{ref:n,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:o});case"slide":return"up"===c||"down"===c?(0,f.jsx)(k.E.div,{ref:n,animate:{y:void 0!==p?p:""},onHoverEnd:()=>h(),onHoverStart:()=>h(),children:o}):(0,f.jsx)(k.E.div,{ref:n,animate:{x:void 0!==d?d:""},onHoverEnd:()=>m(),onHoverStart:()=>m(),children:o});default:return"number"===typeof l&&(l={hover:l,tap:l}),(0,f.jsx)(k.E.div,{ref:n,whileHover:{scale:null===(t=l)||void 0===t?void 0:t.hover},whileTap:{scale:null===(r=l)||void 0===r?void 0:r.tap},children:o})}}));I.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}};var C=I,B=t(237),E=t(2611);var T=e=>{let{adminLogin:n,...t}=e;const a=(0,o.Z)(),i=(0,r.s0)(),[c,u]=(0,s.useState)(!1),l=()=>{u(!c)},d=e=>{e.preventDefault()};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(S.J9,{initialValues:{user_name:"",psw:"",submit:null},onSubmit:async e=>{try{n({user_name:e.user_name,psw:e.psw}).then((e=>{console.log(e),localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("companies",JSON.stringify(e.companies)),localStorage.setItem("role",e.user.user_type),localStorage.setItem("accessToken",e.accessToken),g.Am.success("Login Success"),e.user.user_type,i("/")})).catch((e=>{console.log(e),g.Am.error(e.response.data.message)}))}catch(t){g.Am.error(t),console.error(t)}},children:e=>{let{errors:n,handleBlur:r,handleChange:s,handleSubmit:o,isSubmitting:i,touched:u,values:m}=e;return(0,f.jsxs)("form",{noValidate:!0,onSubmit:o,...t,children:[(0,f.jsxs)(y.Z,{fullWidth:!0,error:Boolean(u.user_name&&n.user_name),sx:{...a.typography.customInput},children:[(0,f.jsx)(w.Z,{htmlFor:"outlined-adornment-email-login",children:"Username"}),(0,f.jsx)(j.Z,{id:"outlined-adornment-email-login",type:"text",value:m.user_name,name:"user_name",onBlur:r,onChange:s,label:"Username",inputProps:{}}),u.user_name&&n.user_name&&(0,f.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.user_name})]}),(0,f.jsxs)(y.Z,{fullWidth:!0,error:Boolean(u.psw&&n.psw),sx:{...a.typography.customInput},children:[(0,f.jsx)(w.Z,{htmlFor:"outlined-adornment-password-login",children:"Password"}),(0,f.jsx)(j.Z,{id:"outlined-adornment-password-login",type:c?"text":"password",value:m.psw,name:"psw",onBlur:r,onChange:s,endAdornment:(0,f.jsx)(Z.Z,{position:"end",children:(0,f.jsx)(_.Z,{"aria-label":"toggle password visibility",onClick:l,onMouseDown:d,edge:"end",size:"large",children:c?(0,f.jsx)(B.Z,{}):(0,f.jsx)(E.Z,{})})}),label:"Password",inputProps:{}}),u.psw&&n.psw&&(0,f.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-password-login",children:n.psw})]}),n.submit&&(0,f.jsx)(p.Z,{sx:{mt:3},children:(0,f.jsx)(v.Z,{error:!0,children:n.submit})}),(0,f.jsx)(p.Z,{sx:{mt:2},children:(0,f.jsx)(C,{children:(0,f.jsx)(b.Z,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign in"})})})]})}})})},H=t(3419),U=t(1322);var A=()=>{const e=(0,o.Z)(),n=(0,i.Z)(e.breakpoints.down("md")),t=(0,r.s0)();return(0,s.useEffect)((()=>{let e=JSON.parse(localStorage.getItem("accessToken"));console.log(e),e&&t("/")}),[]),(0,f.jsx)(m,{children:(0,f.jsx)(c.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,f.jsx)(c.ZP,{item:!0,xs:12,children:(0,f.jsx)(c.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,f.jsx)(c.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,f.jsx)(x,{children:(0,f.jsxs)(c.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(c.ZP,{item:!0,sx:{mb:3},children:(0,f.jsx)(a.rU,{to:"#",children:(0,f.jsx)(H.Z,{})})}),(0,f.jsx)(c.ZP,{item:!0,xs:12,children:(0,f.jsx)(c.ZP,{container:!0,direction:n?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,f.jsx)(c.ZP,{item:!0,children:(0,f.jsxs)(u.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,f.jsx)(l.Z,{color:e.palette.secondary.main,gutterBottom:!0,variant:n?"h3":"h2",children:"Hi, Welcome Back"}),(0,f.jsx)(l.Z,{variant:"caption",fontSize:"16px",textAlign:n?"center":"inherit",children:"Enter your credentials to continue"})]})})})}),(0,f.jsx)(c.ZP,{item:!0,xs:12,children:(0,f.jsx)(T,{adminLogin:U.x4})}),(0,f.jsx)(c.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{})}),(0,f.jsx)(c.ZP,{item:!0,xs:12})]})})})})})})})}}}]);